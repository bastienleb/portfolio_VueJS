"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("vue"),C=require("./GSArrow-2237fb51.js"),U=require("./GSLayoutDefault-4c7f55a1.js"),H=require("./GSLayoutNumeric-569bd6a8.js");function W(e){return typeof e=="function"?e():o.unref(e)}const M=()=>{};function E(e,t){function n(...a){return new Promise((l,i)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(l).catch(i)})}return n}function Z(e,t={}){let n,a,l=M;const i=r=>{clearTimeout(r),l(),l=M};return r=>{const u=W(e),d=W(t.maxWait);return n&&i(n),u<=0||d!==void 0&&d<=0?(a&&(i(a),a=null),Promise.resolve(r())):new Promise((w,h)=>{l=t.rejectOnCancel?h:w,d&&!a&&(a=setTimeout(()=>{n&&i(n),a=null,w(r())},d)),n=setTimeout(()=>{a&&i(a),a=null,w(r())},u)})}}function J(e,t=!0,n=!0,a=!1){let l=0,i,c=!0,r=M,u;const d=()=>{i&&(clearTimeout(i),i=void 0,r(),r=M)};return h=>{const v=W(e),f=Date.now()-l,S=()=>u=h();return d(),v<=0?(l=Date.now(),S()):(f>v&&(n||!c)?(l=Date.now(),S()):t&&(u=new Promise((g,I)=>{r=a?I:g,i=setTimeout(()=>{l=Date.now(),c=!0,g(S()),d()},Math.max(0,v-f))})),!n&&!i&&(i=setTimeout(()=>c=!0,v)),c=!1,u)}}function K(e,t=200,n={}){return E(Z(t,n),e)}function Q(e,t=200,n=!1,a=!0,l=!1){return E(J(t,n,a,l),e)}var Y=4,x=.001,ee=1e-7,te=10,T=11,L=1/(T-1),ne=typeof Float32Array=="function";function N(e,t){return 1-3*t+3*e}function G(e,t){return 3*t-6*e}function D(e){return 3*e}function O(e,t,n){return((N(t,n)*e+G(t,n))*e+D(t))*e}function F(e,t,n){return 3*N(t,n)*e*e+2*G(t,n)*e+D(t)}function re(e,t,n,a,l){var i,c,r=0;do c=t+(n-t)/2,i=O(c,a,l)-e,i>0?n=c:t=c;while(Math.abs(i)>ee&&++r<te);return c}function oe(e,t,n,a){for(var l=0;l<Y;++l){var i=F(t,n,a);if(i===0)return t;var c=O(t,n,a)-e;t-=c/i}return t}function le(e){return e}var ie=function(e,t,n,a){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===a)return le;for(var l=ne?new Float32Array(T):new Array(T),i=0;i<T;++i)l[i]=O(i*L,e,n);function c(r){for(var u=0,d=1,w=T-1;d!==w&&l[d]<=r;++d)u+=L;--d;var h=(r-l[d])/(l[d+1]-l[d]),v=u+h*L,f=F(v,e,n);return f>=x?oe(r,v,e,n):f===0?v:re(r,u,u+L,e,n)}return function(r){return r===0?0:r===1?1:O(c(r),t,a)}};const se={ease:[.25,.1,.25,1],linear:[0,0,1,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],default:[.5,0,.5,1]},ae={FPS:60,BEZIER:se.default},ce=({from:e,to:t,duration:n,bezier:a=ae.BEZIER,on:l,completed:i,stopped:c,done:r})=>{const u=ie(...a),d=t-e,w=Date.now();let h=0,v=e;const f=()=>{let S=(Date.now()-w)/n;if(S>1&&(S=1),v=e+d*u(S),l(v),S===1){i==null||i(v),r==null||r(v);return}h=requestAnimationFrame(f)};return h=requestAnimationFrame(f),()=>{cancelAnimationFrame(h),c==null||c(v),r==null||r(v)}},ue=e=>{let t=0,n=null;return{setSmoothly:(i,c)=>{n==null||n(),c&&(t=c),n=ce({duration:400,from:t,to:i,on:r=>{t=r,e(r)}})},setImmediately:i=>{t=i,e(i)}}},fe=o.defineComponent({name:"GSIndicator",props:{barWidthPercent:{type:Number,required:!0},barOffsetPercent:{type:Number,required:!0}},emits:{"smooth-scroll":e=>!0,scroll:e=>!0,"scroll:start":()=>!0,"scroll:end":()=>!0},setup(e,{emit:t}){const n=o.ref(),a=o.ref(0),l=o.ref(0),i=o.ref(!1),c=h=>{const f=h.clientX-a.value,S=n.value.offsetWidth,g=f/S*100,I=0,p=100-e.barWidthPercent;let P=l.value+g;P<I?P=I:P>p&&(P=p),t("scroll",{barOffsetPercent:P})},r=()=>{document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",c),i.value=!1,t("scroll:end")},u=h=>{i.value=!0,t("scroll:start"),document.addEventListener("mouseup",r),document.addEventListener("mousemove",c),a.value=h.clientX,l.value=e.barOffsetPercent},d=h=>{const v=h.clientX,f=n.value,S=f.getBoundingClientRect().left,p=((v-S)/f.offsetWidth-e.barWidthPercent/100/2)*100;t("smooth-scroll",{barOffsetPercent:p})},w=o.computed(()=>({width:`${e.barWidthPercent}%`,left:`${e.barOffsetPercent}%`}));return{indicatorRef:n,barStyle:w,startBarX:a,startBarOffsetPercent:l,moving:i,onTrackClick:d,onMouseDown:u}}});function me(e,t,n,a,l,i){return o.openBlock(),o.createElementBlock("div",{ref:"indicatorRef",class:o.normalizeClass(["gsc-indicator",{"gsc-indicator--scrolling":e.moving}])},[o.createElementVNode("div",{class:"gsc-indicator__track",onClick:t[0]||(t[0]=(...c)=>e.onTrackClick&&e.onTrackClick(...c))}),o.createElementVNode("div",{class:"gsc-indicator__bar",style:o.normalizeStyle(e.barStyle),onMousedown:t[1]||(t[1]=(...c)=>e.onMouseDown&&e.onMouseDown(...c))},null,36)],2)}const de=C._export_sfc(fe,[["render",me],["__scopeId","data-v-43b724a6"]]),ve=o.defineComponent({name:"GSCarousel",components:{GSIndicator:de},props:{currentItem:{type:Number,default:0},items:{type:Array,required:!0},itemsToShow:{type:Number,required:!0},keyField:{type:String,default:null},itemGap:{type:[String,Number],default:"0",validator:e=>{const t=e.toString().split(" ");return t.length<=2&&t.every(n=>!isNaN(parseInt(n)))}},previewSize:{type:Number,default:120},sticky:{type:Boolean,default:!1},layout:{type:Object,required:!0},layoutProps:{type:Object,required:!1,default:null},ssrItemMinWidth:{type:[Number,String],default:null},ssrItemMaxWidth:{type:[Number,String],default:null}},emits:{"update:current-item":e=>!0},setup(e,{emit:t,expose:n}){const a=o.ref(!1),l=o.ref(),i=o.ref("left"),c=o.ref(0),r=o.ref(e.currentItem||0);o.watch(()=>e.currentItem,s=>{r.value=s});const u=o.reactive({isScrolling:!1,barOffsetPercent:0,barWidthPercent:0}),d=o.computed(()=>{const s=u.barOffsetPercent/(100-u.barWidthPercent);return Math.floor(s*(e.items.length-1))}),{setImmediately:w,setSmoothly:h}=ue(s=>{var m;return(m=l.value)==null?void 0:m.scrollTo({left:s})}),v=o.computed(()=>{const s=e.itemGap.toString().split(" ").map(y=>parseInt(y)),m=s[0],b=s.length===1?m:s[1];return{y:m,x:b}}),f=o.computed(()=>c.value?(c.value-e.previewSize)/e.itemsToShow:0),S=(s,m=!0)=>{if(m){const b=l.value.scrollLeft;h(s,b)}else w(s)},g=()=>{const s=l.value.scrollLeft,m=s/f.value,b=1-(m-Math.floor(m));let y;return b<.09?y=Math.floor(m)+1:y=Math.floor(m),y*f.value<s&&(y+=1),y>e.items.length-1&&(y=e.items.length-1),y},I=s=>{const m=l.value.scrollLeft,b=g();if(s===1){let y=b+e.itemsToShow;b*f.value-e.previewSize-2>m&&(y-=1);const B=e.items.length-e.itemsToShow;y>B&&(y=B);const V=f.value*y;S(V)}else if(s===-1){if(b===0)return;let y=b-e.itemsToShow;y<0&&(y=0);const $=f.value*y-e.previewSize;S($)}},p=s=>{if(!f.value){setTimeout(()=>{p(s)},50);return}if(s>g()){const b=f.value*s;S(b);return}const m=f.value*s-e.previewSize;S(m)},P=Q(()=>{const s=g();s!==r.value&&(r.value=s,t("update:current-item",r.value))},200);let z=0;const q=K(s=>{if(w(s),!(!e.sticky||u.isScrolling)){if(z<s){const m=f.value*r.value;S(m)}else if(Math.abs(f.value*r.value-s)>e.previewSize+2){const m=f.value*(r.value-1)-e.previewSize;S(m)}z=s}},300),A=()=>{const s=l.value.scrollLeft;s<2?i.value="left":l.value.scrollWidth<=s+l.value.offsetWidth+2?i.value="right":i.value="none",u.barOffsetPercent=s/l.value.scrollWidth*100,P(),q(s)},R=({barOffsetPercent:s},m=!1)=>{const b=l.value.scrollWidth*(s/100);S(b,m)},X=s=>{u.isScrolling=s};let k=null;o.onMounted(()=>{k=new ResizeObserver(([s])=>{window.requestAnimationFrame(()=>{c.value=s.contentRect.width,o.nextTick(()=>{u.barWidthPercent=c.value/l.value.scrollWidth*100})})}),k.observe(l.value),a.value=!0,r.value!==0&&p(r.value)}),o.onBeforeUnmount(()=>{k==null||k.disconnect()});const _=o.computed(()=>Object.entries({"--gsc-item-gap-y":v.value.y,"--gsc-item-gap-x":v.value.x,"--gsc-item-ssr-min-width":e.ssrItemMinWidth?`${parseInt(e.ssrItemMinWidth.toString())}px`:"","--gsc-item-ssr-max-width":e.ssrItemMaxWidth?`${parseInt(e.ssrItemMaxWidth.toString())}px`:""}).reduce((s,[m,b])=>`${s}${m}: ${b};`,"")),j=o.computed(()=>({width:`calc((100% - ${e.previewSize}px) / ${e.itemsToShow})`}));return n({onMove:I,onMoveTo:p}),{trackRef:l,styles:_,itemStyle:j,initialized:a,disabledSide:i,indicatorOptions:u,scopedCurrentItem:r,currentItemByPercent:d,onMove:I,onMoveTo:p,onTrackScroll:A,onIndicatorScroll:R,onSetIndicatorScrollStatus:X}}});const Se={class:"gsc-track__inner"};function ye(e,t,n,a,l,i){const c=o.resolveComponent("GSIndicator");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["gsc",{"gsc--scrolling":e.indicatorOptions.isScrolling,"gsc--initialized":e.initialized}]),style:o.normalizeStyle(e.styles)},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.layout),o.mergeProps({"on-move":e.onMove,"on-move-to":e.onMoveTo,"disabled-side":e.disabledSide,"current-item":e.scopedCurrentItem,"current-item-by-percent":e.currentItemByPercent,items:e.items,initialized:e.initialized},e.layoutProps),{track:o.withCtx(()=>[o.createElementVNode("div",{ref:"trackRef",class:"gsc-track",onScrollPassive:t[0]||(t[0]=(...r)=>e.onTrackScroll&&e.onTrackScroll(...r))},[o.createElementVNode("div",Se,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.items,(r,u)=>(o.openBlock(),o.createElementBlock("div",{key:e.keyField?r[e.keyField]:u,class:"gsc-track__item",style:o.normalizeStyle(e.itemStyle)},[o.renderSlot(e.$slots,"item",{data:r,index:u})],4))),128))])],544)]),indicator:o.withCtx(()=>[o.createVNode(c,{"bar-offset-percent":e.indicatorOptions.barOffsetPercent,"bar-width-percent":e.indicatorOptions.barWidthPercent,onSmoothScroll:t[1]||(t[1]=r=>e.onIndicatorScroll(r,!0)),onScroll:e.onIndicatorScroll,"onScroll:start":t[2]||(t[2]=r=>e.onSetIndicatorScrollStatus(!0)),"onScroll:end":t[3]||(t[3]=r=>e.onSetIndicatorScrollStatus(!1))},null,8,["bar-offset-percent","bar-width-percent","onScroll"])]),_:3},16,["on-move","on-move-to","disabled-side","current-item","current-item-by-percent","items","initialized"]))],6)}const he=C._export_sfc(ve,[["render",ye]]);exports.GSLayoutDefault=U.GSLayoutDefault;exports.GSLayoutNumeric=H.GSLayoutNumeric;exports.GSCarousel=he;
//# sourceMappingURL=index.cjs.map
